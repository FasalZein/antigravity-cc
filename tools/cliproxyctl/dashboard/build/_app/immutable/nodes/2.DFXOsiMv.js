import{b as De,d as mt,f as T,a as b,e as Fe,c as ae}from"../chunks/C98nT5Kw.js";import{i as Be}from"../chunks/CRb-r2Tl.js";import{o as gt}from"../chunks/BGGrPby1.js";import{h as Y,D as Pe,C as xt,l as x,M as J,F as _t,H as ht,G as Ue,I as Ce,J as Le,e as ce,a4 as nt,aF as bt,ao as Ve,c as Ae,b as je,s as yt,aD as Qe,aM as st,a9 as We,aI as wt,aN as kt,aO as It,aP as Ct,a as Ne,aQ as ee,r as it,p as ot,aR as Re,a5 as lt,aC as At,d as St,Z as ge,aS as ct,ac as Et,aT as Tt,x as B,R as Mt,aU as Lt,aG as Nt,aA as Rt,aV as Ot,a6 as Ht,aW as Pt,aX as jt,aY as Gt,av as Ft,aZ as Bt,a_ as Qt,a$ as zt,b0 as qt,N as Dt,v as de,y as ve,B as m,z as s,aL as $,A as n,ap as dt,w as q,b1 as vt,b2 as Ut,g as Vt,O as Ie,aJ as Ye}from"../chunks/D30m10lS.js";import{s as j,d as Se,e as ut}from"../chunks/D78zPr7t.js";import{p as oe,i as P}from"../chunks/IjIbStLW.js";function he(e,t){return t}function Wt(e,t,r){for(var i=[],c=t.length,o,p=t.length,g=0;g<c;g++){let u=t[g];ot(u,()=>{if(o){if(o.pending.delete(u),o.done.add(u),o.pending.size===0){var _=e.outrogroups;Ge(Qe(o.done)),_.delete(o),_.size===0&&(e.outrogroups=null)}}else p-=1},!1)}if(p===0){var d=i.length===0&&r!==null;if(d){var h=r,f=h.parentNode;At(f),f.append(h),e.items.clear()}Ge(t,!d)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function Ge(e,t=!0){for(var r=0;r<e.length;r++)St(e[r],t)}var Je;function be(e,t,r,i,c,o=null){var p=e,g=new Map,d=(t&ct)!==0;if(d){var h=e;p=Y?Ce(ge(h)):h.appendChild(Ne())}Y&&Pe();var f=null,u=J(()=>{var v=r();return st(v)?v:v==null?[]:Qe(v)}),_,S=!0;function M(){a.fallback=f,Yt(a,_,p,t,i),f!==null&&(_.length===0?(f.f&ee)===0?it(f):(f.f^=ee,xe(f,null,p)):ot(f,()=>{f=null}))}var C=xt(()=>{_=x(u);var v=_.length;let y=!1;if(Y){var N=_t(p)===ht;N!==(v===0)&&(p=Ue(),Ce(p),Le(!1),y=!0)}for(var I=new Set,G=Ae,F=yt(),A=0;A<v;A+=1){Y&&ce.nodeType===nt&&ce.data===bt&&(p=ce,y=!0,Le(!1));var w=_[A],L=i(w,A),E=S?null:g.get(L);E?(E.v&&Ve(E.v,w),E.i&&Ve(E.i,A),F&&G.skipped_effects.delete(E.e)):(E=Jt(g,S?p:Je??=Ne(),w,L,A,c,t,r),S||(E.e.f|=ee),g.set(L,E)),I.add(L)}if(v===0&&o&&!f&&(S?f=je(()=>o(p)):(f=je(()=>o(Je??=Ne())),f.f|=ee)),Y&&v>0&&Ce(Ue()),!S)if(F){for(const[O,R]of g)I.has(O)||G.skipped_effects.add(R.e);G.oncommit(M),G.ondiscard(()=>{})}else M();y&&Le(!0),x(u)}),a={effect:C,items:g,outrogroups:null,fallback:f};S=!1,Y&&(p=ce)}function Yt(e,t,r,i,c){var o=(i&Tt)!==0,p=t.length,g=e.items,d=e.effect.first,h,f=null,u,_=[],S=[],M,C,a,v;if(o)for(v=0;v<p;v+=1)M=t[v],C=c(M,v),a=g.get(C).e,(a.f&ee)===0&&(a.nodes?.a?.measure(),(u??=new Set).add(a));for(v=0;v<p;v+=1){if(M=t[v],C=c(M,v),a=g.get(C).e,e.outrogroups!==null)for(const E of e.outrogroups)E.pending.delete(a),E.done.delete(a);if((a.f&ee)!==0)if(a.f^=ee,a===d)xe(a,null,r);else{var y=f?f.next:d;a===e.effect.last&&(e.effect.last=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),te(e,f,a),te(e,a,y),xe(a,y,r),f=a,_=[],S=[],d=f.next;continue}if((a.f&Re)!==0&&(it(a),o&&(a.nodes?.a?.unfix(),(u??=new Set).delete(a))),a!==d){if(h!==void 0&&h.has(a)){if(_.length<S.length){var N=S[0],I;f=N.prev;var G=_[0],F=_[_.length-1];for(I=0;I<_.length;I+=1)xe(_[I],N,r);for(I=0;I<S.length;I+=1)h.delete(S[I]);te(e,G.prev,F.next),te(e,f,G),te(e,F,N),d=N,f=F,v-=1,_=[],S=[]}else h.delete(a),xe(a,d,r),te(e,a.prev,a.next),te(e,a,f===null?e.effect.first:f.next),te(e,f,a),f=a;continue}for(_=[],S=[];d!==null&&d!==a;)(h??=new Set).add(d),S.push(d),d=d.next;if(d===null)continue}(a.f&ee)===0&&_.push(a),f=a,d=a.next}if(e.outrogroups!==null){for(const E of e.outrogroups)E.pending.size===0&&(Ge(Qe(E.done)),e.outrogroups?.delete(E));e.outrogroups.size===0&&(e.outrogroups=null)}if(d!==null||h!==void 0){var A=[];if(h!==void 0)for(a of h)(a.f&Re)===0&&A.push(a);for(;d!==null;)(d.f&Re)===0&&d!==e.fallback&&A.push(d),d=d.next;var w=A.length;if(w>0){var L=(i&ct)!==0&&p===0?r:null;if(o){for(v=0;v<w;v+=1)A[v].nodes?.a?.measure();for(v=0;v<w;v+=1)A[v].nodes?.a?.fix()}Wt(e,A,L)}}o&&Et(()=>{if(u!==void 0)for(a of u)a.nodes?.a?.apply()})}function Jt(e,t,r,i,c,o,p,g){var d=(p&It)!==0?(p&Ct)===0?wt(r,!1,!1):We(r):null,h=(p&kt)!==0?We(c):null;return{v:d,i:h,e:je(()=>(o(t,d??r,h??c,g),()=>{e.delete(i)}))}}function xe(e,t,r){if(e.nodes)for(var i=e.nodes.start,c=e.nodes.end,o=t&&(t.f&ee)===0?t.nodes.start:r;i!==null;){var p=lt(i);if(o.before(i),i===c)return;i=p}}function te(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function Kt(e,t,r=!1,i=!1,c=!1){var o=e,p="";B(()=>{var g=Mt;if(p===(p=t()??"")){Y&&Pe();return}if(g.nodes!==null&&(Lt(g.nodes.start,g.nodes.end),g.nodes=null),p!==""){if(Y){ce.data;for(var d=Pe(),h=d;d!==null&&(d.nodeType!==nt||d.data!=="");)h=d,d=lt(d);if(d===null)throw Nt(),Rt;De(ce,h),o=Ce(d);return}var f=p+"";r?f=`<svg>${f}</svg>`:i&&(f=`<math>${f}</math>`);var u=mt(f);if((r||i)&&(u=ge(u)),De(ge(u),u.lastChild),r||i)for(;ge(u);)o.before(ge(u));else o.before(u)}})}function Xt(e,t,r){var i=e==null?"":""+e;return i===""?null:i}function Zt(e,t){return e==null?null:String(e)}function V(e,t,r,i,c,o){var p=e.__className;if(Y||p!==r||p===void 0){var g=Xt(r);(!Y||g!==e.getAttribute("class"))&&(g==null?e.removeAttribute("class"):t?e.className=g:e.setAttribute("class",g)),e.__className=r}return o}function ft(e,t,r,i){var c=e.__style;if(Y||c!==t){var o=Zt(t);(!Y||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}return i}function pt(e,t,r=!1){if(e.multiple){if(t==null)return;if(!st(t))return jt();for(var i of e.options)i.selected=t.includes(ye(i));return}for(i of e.options){var c=ye(i);if(Gt(c,t)){i.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function $t(e){var t=new MutationObserver(()=>{pt(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ft(()=>{t.disconnect()})}function ea(e,t,r=t){var i=new WeakSet,c=!0;Ot(e,"change",o=>{var p=o?"[selected]":":checked",g;if(e.multiple)g=[].map.call(e.querySelectorAll(p),ye);else{var d=e.querySelector(p)??e.querySelector("option:not([disabled])");g=d&&ye(d)}r(g),Ae!==null&&i.add(Ae)}),Ht(()=>{var o=t();if(e===document.activeElement){var p=Pt??Ae;if(i.has(p))return}if(pt(e,o,c),c&&o===void 0){var g=e.querySelector(":checked");g!==null&&(o=ye(g),r(o))}e.__value=o,c=!1}),$t(e)}function ye(e){return"__value"in e?e.__value:e.value}const ta=Symbol("is custom element"),aa=Symbol("is html");function re(e,t,r,i){var c=ra(e);Y&&(c[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||c[t]!==(c[t]=r)&&(t==="loading"&&(e[Bt]=r),r==null?e.removeAttribute(t):typeof r!="string"&&na(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function ra(e){return e.__attributes??={[ta]:e.nodeName.includes("-"),[aa]:e.namespaceURI===Qt}}var Ke=new Map;function na(e){var t=e.getAttribute("is")||e.nodeName,r=Ke.get(t);if(r)return r;Ke.set(t,r=[]);for(var i,c=e,o=Element.prototype;o!==c;){i=qt(c);for(var p in i)i[p].set&&r.push(p);c=zt(c)}return r}let _e={data:null,timestamp:0};const sa=300*1e3;async function ia(e=!1){const t=Date.now();if(!e&&_e.data&&t-_e.timestamp<sa)return _e.data;const i=await fetch(e?"/api/quota?refresh=true":"/api/quota");if(!i.ok)throw new Error(`Failed to fetch quota: ${i.statusText}`);const c=await i.json();return _e={data:c,timestamp:t},c}function oa(){_e={data:null,timestamp:0}}const l=Dt({data:null,loading:!0,error:null,activeTab:"antigravity",emailsHidden:!1,countdown:300,refreshing:!1,modalOpen:!1,modalEmail:"",settingsOpen:!1,settings:{refreshInterval:300,autoRefresh:!0},initialized:!1});function Ee(){return typeof window<"u"}function la(){if(!Ee()||l.initialized)return;const e=localStorage.getItem("dashboard-tab");(e==="antigravity"||e==="codex"||e==="gemini")&&(l.activeTab=e),localStorage.getItem("dashboard-emails-hidden")==="true"&&(l.emailsHidden=!0);const r=localStorage.getItem("dashboard-settings");if(r)try{const i=JSON.parse(r);l.settings={...l.settings,...i},l.countdown=l.settings.refreshInterval}catch{}l.initialized=!0}function ze(e){if(!l.data?.accounts?.length)return{avg:0,resetIn:""};let t=0,r=0,i="";for(const c of l.data.accounts){const o=c.groupQuotas?.[e];o&&(t+=o.minPercent,r++,!i&&o.resetIn&&(i=o.resetIn))}return{avg:r>0?t/r:0,resetIn:i}}function Xe(){return ze("Claude")}function Ze(){return ze("Gemini Pro")}function $e(){return ze("Gemini Flash")}function et(){return l.data?.codexAccounts?.length?{avg:l.data.codexAccounts.reduce((t,r)=>t+(r.sessionPercent||0),0)/l.data.codexAccounts.length,resetIn:l.data.codexAccounts[0]?.sessionResetIn||""}:{avg:0,resetIn:""}}function tt(){return l.data?.codexAccounts?.length?{avg:l.data.codexAccounts.reduce((t,r)=>t+(r.weeklyPercent||0),0)/l.data.codexAccounts.length,resetIn:l.data.codexAccounts[0]?.weeklyResetIn||""}:{avg:0,resetIn:""}}function ca(e){l.activeTab=e,Ee()&&localStorage.setItem("dashboard-tab",e)}function da(){l.emailsHidden=!l.emailsHidden,Ee()&&localStorage.setItem("dashboard-emails-hidden",String(l.emailsHidden))}function va(e){l.modalEmail=e,l.modalOpen=!0}function Oe(){l.modalOpen=!1,l.modalEmail=""}function ua(){l.settingsOpen=!0}function fe(){l.settingsOpen=!1}function fa(e){l.settings={...l.settings,...e},l.countdown=l.settings.refreshInterval,Ee()&&localStorage.setItem("dashboard-settings",JSON.stringify(l.settings))}async function qe(e=!1){e?l.refreshing=!0:l.loading=!0,l.error=null;try{e&&oa(),l.data=await ia(e),l.countdown=l.settings.refreshInterval}catch(t){l.error=t instanceof Error?t.message:"Unknown error"}finally{l.loading=!1,l.refreshing=!1}}function pa(){const e=setInterval(()=>{l.settings.autoRefresh&&(l.countdown--,l.countdown<=0&&qe(!0))},1e3);return()=>clearInterval(e)}function ma(e){return`${Math.floor(e/60)}m`}var ga=T('<div class="relative glow-ring rounded-full p-0.5"><div class="relative w-10 h-10 bg-surface-2 rounded-full flex items-center justify-center"><svg class="countdown-ring absolute inset-0 w-10 h-10" viewBox="0 0 40 40"><circle cx="20" cy="20" r="18" fill="none" stroke="#27272a" stroke-width="2"></circle><circle cx="20" cy="20" r="18" fill="none" stroke="#6366f1" stroke-width="2" stroke-linecap="round" class="ring-progress"></circle></svg> <span class="text-xs font-mono text-text-secondary relative z-10"> </span></div></div>');function xa(e,t){de(t,!0);let r=oe(t,"maxSeconds",3,300);const i=113.1,c=$(()=>i*(1-t.seconds/r()));var o=ga(),p=s(o),g=s(p),d=m(s(g));re(d,"stroke-dasharray",i),n(g);var h=m(g,2),f=s(h,!0);n(h),n(p),n(o),B(u=>{re(d,"stroke-dashoffset",x(c)),j(f,u)},[()=>ma(t.seconds)]),b(e,o),ve()}var _a=Fe('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"></path></svg>'),ha=Fe('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>'),ba=T('<header class="glass sticky top-0 z-50 border-b border-white/5"><div class="max-w-7xl mx-auto px-4 py-3"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><img src="/ai-pill.avif" alt="AI-Pill" class="w-14 h-14 rounded-lg"/> <div><h1 class="text-lg font-semibold text-white tracking-tight">AI-Pill War Room</h1> <p class="text-xs text-text-muted">Quota Command Center</p></div></div> <div class="flex items-center gap-2"><button><img src="/antigravity.svg" alt="" class="h-5 w-5"/> <span class="hidden sm:inline">Antigravity</span></button> <button><img src="/codex.svg" alt="" class="h-5 w-5"/> <span class="hidden sm:inline">Codex</span></button> <button><img src="/gemini-cli.svg" alt="" class="h-5 w-5"/> <span class="hidden sm:inline">Gemini CLI</span></button></div> <div class="flex items-center gap-3"><button class="p-2 rounded-lg hover:bg-surface-3 text-text-secondary hover:text-text-primary transition-colors" title="Toggle email visibility"><!></button> <button class="p-2 rounded-lg hover:bg-surface-3 text-text-secondary hover:text-text-primary transition-colors" title="Settings"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a6.759 6.759 0 010 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 010-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></button> <!> <button class="flex items-center gap-2 px-4 py-2 bg-accent-primary/10 hover:bg-accent-primary/20 border border-accent-primary/30 rounded-lg text-accent-primary text-sm font-medium transition-colors disabled:opacity-50"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span class="hidden sm:inline">Refresh</span></button></div></div></div></header>');function ya(e,t){de(t,!1);function r(I){ca(I)}async function i(){await qe(!0)}Be();var c=ba(),o=s(c),p=s(o),g=m(s(p),2),d=s(g);d.__click=()=>r("antigravity");var h=m(d,2);h.__click=()=>r("codex");var f=m(h,2);f.__click=()=>r("gemini"),n(g);var u=m(g,2),_=s(u);_.__click=function(...I){da?.apply(this,I)};var S=s(_);{var M=I=>{var G=_a();b(I,G)},C=I=>{var G=ha();b(I,G)};P(S,I=>{l.emailsHidden?I(M):I(C,!1)})}n(_);var a=m(_,2);a.__click=function(...I){ua?.apply(this,I)};var v=m(a,2);xa(v,{get seconds(){return l.countdown},get maxSeconds(){return l.settings.refreshInterval}});var y=m(v,2);y.__click=i;var N=s(y);dt(2),n(y),n(u),n(p),n(o),n(c),B(()=>{V(d,1,`tab-btn flex items-center gap-2 px-3 py-2 rounded-lg border border-white/10 text-sm font-medium ${l.activeTab==="antigravity"?"active":"text-text-secondary hover:text-text-primary"}`),V(h,1,`tab-btn flex items-center gap-2 px-3 py-2 rounded-lg border border-white/10 text-sm font-medium ${l.activeTab==="codex"?"active":"text-text-secondary hover:text-text-primary"}`),V(f,1,`tab-btn flex items-center gap-2 px-3 py-2 rounded-lg border border-white/10 text-sm font-medium ${l.activeTab==="gemini"?"active":"text-text-secondary hover:text-text-primary"}`),y.disabled=l.refreshing,V(N,0,`w-4 h-4 ${l.refreshing?"spin":""}`)}),b(e,c),ve()}Se(["click"]);var wa=T('<footer class="border-t border-white/5 mt-8 py-4"><div class="max-w-7xl mx-auto px-4"><div class="flex items-center justify-center gap-4 text-xs text-text-muted"><span class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-status-healthy animate-pulse"></span> Live</span> <span class="text-surface-4">|</span> <span>Auto-refresh <span class="font-mono">5m</span></span> <span class="text-surface-4">|</span> <kbd class="px-1.5 py-0.5 bg-surface-3 rounded text-[10px] font-mono">Ctrl+C</kbd> <span>to stop</span></div></div></footer>');function ka(e){var t=wa();b(e,t)}var Ia=T('<span class="text-xs text-text-muted font-mono"> </span>'),Ca=T('<div class="glass-card rounded-xl p-5"><div class="flex items-center justify-between mb-3"><span class="text-xs text-text-muted uppercase tracking-wider font-medium"> </span> <!></div> <p class="text-3xl font-bold text-white font-mono"> </p></div>');function at(e,t){let r=oe(t,"subLabel",3,"");var i=Ca(),c=s(i),o=s(c),p=s(o,!0);n(o);var g=m(o,2);{var d=u=>{var _=Ia(),S=s(_,!0);n(_),B(()=>j(S,r())),b(u,_)};P(g,u=>{r()&&u(d)})}n(c);var h=m(c,2),f=s(h,!0);n(h),n(i),B(()=>{j(p,t.label),j(f,t.value)}),b(e,i)}var Aa=T('<div class="glass-card rounded-xl p-5"><div class="flex items-center justify-between"><div><span class="text-xs text-text-muted uppercase tracking-wider font-medium"> </span> <p> </p></div> <div class="relative w-14 h-14"><svg class="w-14 h-14 -rotate-90" viewBox="0 0 56 56"><circle cx="28" cy="28" r="24" fill="none" stroke="#27272a" stroke-width="4"></circle><circle cx="28" cy="28" r="24" fill="none" stroke-width="4" stroke-linecap="round" class="ring-progress"></circle></svg> <span class="absolute inset-0 flex items-center justify-center text-xs font-mono font-normal text-text-secondary"> </span></div></div></div>');function pe(e,t){let r=oe(t,"resetIn",3,"");const i=150.8,c=$(()=>i*(1-t.percent/100)),o=$(()=>t.percent>=50?"#10b981":t.percent>=20?"#f59e0b":"#ef4444"),p=$(()=>t.percent>=50?"text-status-healthy":t.percent>=20?"text-status-caution":"text-status-critical");var g=Aa(),d=s(g),h=s(d),f=s(h),u=s(f,!0);n(f);var _=m(f,2),S=s(_,!0);n(_),n(h);var M=m(h,2),C=s(M),a=m(s(C));re(a,"stroke-dasharray",i),n(C);var v=m(C,2),y=s(v);n(v),n(M),n(d),n(g),B(N=>{j(u,t.label),V(_,1,`text-2xl font-medium mt-2 ${x(p)??""}`),j(S,r()||"—"),re(a,"stroke",x(o)),re(a,"stroke-dashoffset",x(c)),j(y,`${N??""}%`)},[()=>Math.round(t.percent)]),b(e,g)}var Sa=T('<span class="text-xs text-accent-primary font-mono px-1.5 py-0.5 bg-accent-primary/10 rounded"> </span>'),Ea=T('<div class="space-y-2"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-sm text-text-secondary font-medium"> </span> <!></div> <span> </span></div> <div class="h-2 bg-surface-3 rounded-full overflow-hidden"><div></div></div></div>');function me(e,t){let r=oe(t,"resetIn",3,"");const i=$(()=>t.percent>=50?"bg-status-healthy":t.percent>=20?"bg-status-caution":"bg-status-critical"),c=$(()=>t.percent>=50?"text-status-healthy":t.percent>=20?"text-status-caution":"text-status-critical");var o=Ea(),p=s(o),g=s(p),d=s(g),h=s(d,!0);n(d);var f=m(d,2);{var u=a=>{var v=Sa(),y=s(v);n(v),B(()=>j(y,`↻ ${r()??""}`)),b(a,v)};P(f,a=>{r()&&a(u)})}n(g);var _=m(g,2),S=s(_);n(_),n(p);var M=m(p,2),C=s(M);n(M),n(o),B(a=>{j(h,t.label),V(_,1,`font-mono font-normal text-sm ${x(c)??""}`),j(S,`${a??""}%`),V(C,1,`progress-fill h-full rounded-full ${x(i)??""}`),ft(C,`width: ${t.percent??""}%`)},[()=>Math.round(t.percent)]),b(e,o)}var Ta=T('<p class="text-xs text-status-critical mt-1"> </p>'),Ma=T('<div class="flex items-center gap-3 mt-1"><span class="text-xs text-text-muted"> </span> <span class="text-xs text-text-muted">•</span> <span class="text-xs text-text-muted"> </span></div>'),La=T("<p> </p> <!>",1),Na=T('<span class="text-xs px-2 py-0.5 bg-accent-primary/20 text-accent-primary rounded-full font-medium"> </span>'),Ra=T('<p class="text-xs text-status-critical mt-1"> </p>'),Oa=T('<span class="text-xs text-status-critical">• Limit Reached</span>'),Ha=T('<div class="flex items-center gap-3 mt-1"><span class="text-xs text-text-muted">Codex CLI</span> <!></div>'),Pa=T('<div class="flex items-center gap-2"><p> </p> <!></div> <!>',1),ja=T('<button class="p-2 rounded-lg hover:bg-surface-3 text-text-muted hover:text-text-primary transition-colors" title="View all models"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></button>'),Ga=T("<!> <!> <!>",1),Fa=T("<!> <!>",1),Ba=T('<div class="p-5 space-y-4"><!></div>'),Qa=T('<div class="account-card glass-card rounded-xl overflow-hidden"><div class="px-5 py-4 border-b border-white/5 flex items-center justify-between"><div class="min-w-0 flex-1"><!></div> <!></div> <!></div>');function rt(e,t){de(t,!0);let r=oe(t,"lastUpdated",3,"");const i=$(()=>t.type==="antigravity"),c=$(()=>t.account),o=$(()=>t.account);function p(){va(t.account.email)}var g=Qa(),d=s(g),h=s(d),f=s(h);{var u=v=>{var y=La(),N=q(y),I=s(N,!0);n(N);var G=m(N,2);{var F=w=>{var L=Ta(),E=s(L,!0);n(L),B(()=>j(E,t.account.error)),b(w,L)},A=w=>{var L=Ma(),E=s(L),O=s(E);n(E);var R=m(E,4),k=s(R);n(R),n(L),B(H=>{j(O,`${H??""} models`),j(k,`Updated ${r()??""}`)},[()=>x(c).quotas?.length||Object.keys(x(c).groupQuotas||{}).length]),b(w,L)};P(G,w=>{t.account.error?w(F):w(A,!1)})}B(()=>{V(N,1,`text-sm text-text-primary truncate ${l.emailsHidden?"blur-email":""}`),j(I,t.account.email)}),b(v,y)},_=v=>{var y=Pa(),N=q(y),I=s(N),G=s(I,!0);n(I);var F=m(I,2);{var A=O=>{var R=Na(),k=s(R,!0);n(R),B(()=>j(k,x(o).planType)),b(O,R)};P(F,O=>{x(o).planType&&O(A)})}n(N);var w=m(N,2);{var L=O=>{var R=Ra(),k=s(R,!0);n(R),B(()=>j(k,t.account.error)),b(O,R)},E=O=>{var R=Ha(),k=m(s(R),2);{var H=D=>{var K=Oa();b(D,K)};P(k,D=>{x(o).limitReached&&D(H)})}n(R),b(O,R)};P(w,O=>{t.account.error?O(L):O(E,!1)})}B(()=>{V(I,1,`text-sm text-text-primary truncate ${l.emailsHidden?"blur-email":""}`),j(G,t.account.email)}),b(v,y)};P(f,v=>{x(i)?v(u):v(_,!1)})}n(h);var S=m(h,2);{var M=v=>{var y=ja();y.__click=p,b(v,y)};P(S,v=>{x(i)&&!t.account.error&&v(M)})}n(d);var C=m(d,2);{var a=v=>{var y=Ba(),N=s(y);{var I=F=>{var A=Ga(),w=q(A);{var L=H=>{me(H,{label:"Claude",get percent(){return x(c).groupQuotas.Claude.minPercent},get resetIn(){return x(c).groupQuotas.Claude.resetIn}})};P(w,H=>{x(c).groupQuotas?.Claude&&H(L)})}var E=m(w,2);{var O=H=>{me(H,{label:"Gemini Pro",get percent(){return x(c).groupQuotas["Gemini Pro"].minPercent},get resetIn(){return x(c).groupQuotas["Gemini Pro"].resetIn}})};P(E,H=>{x(c).groupQuotas?.["Gemini Pro"]&&H(O)})}var R=m(E,2);{var k=H=>{me(H,{label:"Gemini Flash",get percent(){return x(c).groupQuotas["Gemini Flash"].minPercent},get resetIn(){return x(c).groupQuotas["Gemini Flash"].resetIn}})};P(R,H=>{x(c).groupQuotas?.["Gemini Flash"]&&H(k)})}b(F,A)},G=F=>{var A=Fa(),w=q(A);me(w,{label:"Session (5h)",get percent(){return x(o).sessionPercent},get resetIn(){return x(o).sessionResetIn}});var L=m(w,2);me(L,{label:"Weekly",get percent(){return x(o).weeklyPercent},get resetIn(){return x(o).weeklyResetIn}}),b(F,A)};P(N,F=>{x(i)?F(I):F(G,!1)})}n(y),b(v,y)};P(C,v=>{t.account.error||v(a)})}n(g),B(()=>re(g,"data-email",t.account.email)),b(e,g),ve()}Se(["click"]);var za=T('<img alt="" class="w-10 h-10"/>'),qa=Fe('<svg class="w-10 h-10 text-text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>'),Da=T('<p class="text-sm text-text-muted"> </p>'),Ua=T('<div class="text-center py-20"><div class="inline-flex items-center justify-center w-20 h-20 bg-surface-2 rounded-2xl mb-6"><!></div> <h2 class="text-xl font-semibold text-white mb-2"> </h2> <p class="text-text-muted mb-4"><!></p> <!></div>');function He(e,t){let r=oe(t,"icon",3,""),i=oe(t,"hint",3,"");var c=Ua(),o=s(c),p=s(o);{var g=C=>{var a=za();B(()=>re(a,"src",r())),b(C,a)},d=C=>{var a=qa();b(C,a)};P(p,C=>{r()?C(g):C(d,!1)})}n(o);var h=m(o,2),f=s(h,!0);n(h);var u=m(h,2),_=s(u);Kt(_,()=>t.message),n(u);var S=m(u,2);{var M=C=>{var a=Da(),v=s(a,!0);n(a),B(()=>j(v,i())),b(C,a)};P(S,C=>{i()&&C(M)})}n(c),B(()=>j(f,t.title)),b(e,c)}var Va=T('<div class="flex items-center justify-between py-2 border-b border-white/5 last:border-0"><div class="flex-1 min-w-0 pr-4"><p class="text-sm text-text-primary truncate font-mono"> </p></div> <div class="flex items-center gap-4 flex-shrink-0"><span class="text-xs text-text-muted font-mono"> </span> <div class="w-20 h-1.5 bg-surface-3 rounded-full overflow-hidden"><div></div></div> <span> </span></div></div>'),Wa=T('<div class="mb-4"><p class="text-xs text-text-muted uppercase tracking-wider mb-3 font-medium"> </p> <!></div>'),Ya=T('<span class="text-xs text-accent-primary font-mono"> </span>'),Ja=T('<div class="flex items-center justify-between py-2 px-3 rounded-lg bg-surface-2/50 mb-2"><span class="text-sm text-text-secondary truncate flex-1"> </span> <div class="flex items-center gap-3"><!> <span> </span></div></div>'),Ka=T('<p class="text-text-muted text-center py-4">No quota data available</p>'),Xa=T('<div class="fixed inset-0 z-50"><div class="modal-backdrop absolute inset-0"></div> <div class="relative flex items-center justify-center min-h-screen p-4"><div class="modal-enter glass-card rounded-xl shadow-2xl w-full max-w-lg max-h-[80vh] overflow-hidden"><div class="flex items-center justify-between px-5 py-4 border-b border-white/5"><h3> </h3> <button class="p-2 rounded-lg hover:bg-surface-3 text-text-muted hover:text-text-primary transition-colors" title="Close"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-5 overflow-y-auto max-h-[60vh]"><!></div></div></div></div>');function Za(e,t){de(t,!1);function r(u){u.target===u.currentTarget&&Oe()}function i(u){u.key==="Escape"&&Oe()}const c=()=>l.data?.accounts.find(u=>u.email===l.modalEmail);function o(){const u=c();if(!u?.quotas)return[];const _={Claude:0,"Gemini Pro":1,"Gemini Flash":2,Other:3},S=[...u.quotas].sort((a,v)=>{const y=(_[a.group]??99)-(_[v.group]??99);return y!==0?y:a.percentage-v.percentage}),M=[];let C="";for(const a of S)a.group!==C&&(C=a.group,M.push({name:C,quotas:[]})),M[M.length-1].quotas.push(a);return M}function p(u){return u>=50?"text-status-healthy":u>=20?"text-status-caution":"text-status-critical"}function g(u){return u>=50?"bg-status-healthy":u>=20?"bg-status-caution":"bg-status-critical"}Be();var d=ae();ut("keydown",vt,i);var h=q(d);{var f=u=>{var _=Xa();_.__click=r;var S=m(s(_),2),M=s(S);M.__click=A=>A.stopPropagation();var C=s(M),a=s(C),v=s(a,!0);n(a);var y=m(a,2);y.__click=function(...A){Oe?.apply(this,A)},n(C);var N=m(C,2),I=s(N);{var G=A=>{var w=ae(),L=q(w);be(L,1,o,he,(E,O)=>{var R=Wa(),k=s(R),H=s(k,!0);n(k);var D=m(k,2);be(D,1,()=>x(O).quotas,he,(K,U)=>{var X=Va(),Z=s(X),z=s(Z),Q=s(z,!0);n(z),n(Z);var W=m(Z,2),ue=s(W),we=s(ue,!0);n(ue);var le=m(ue,2),ke=s(le);n(le);var ne=m(le,2),Te=s(ne);n(ne),n(W),n(X),B((se,ie,Me)=>{re(z,"title",x(U).name),j(Q,x(U).name),j(we,x(U).resetIn),V(ke,1,`h-full rounded-full ${se??""}`),ft(ke,`width: ${x(U).percentage??""}%`),V(ne,1,`text-sm font-mono w-12 text-right ${ie??""}`),j(Te,`${Me??""}%`)},[()=>g(x(U).percentage),()=>p(x(U).percentage),()=>Math.round(x(U).percentage)]),b(K,X)}),n(R),B(()=>j(H,x(O).name)),b(E,R)}),b(A,w)},F=A=>{const w=J(c);var L=ae(),E=q(L);{var O=k=>{var H=ae(),D=q(H);be(D,1,()=>Object.entries(x(w).groupQuotas),he,(K,U)=>{var X=$(()=>Ut(x(U),2));let Z=()=>x(X)[0],z=()=>x(X)[1];var Q=Ja(),W=s(Q),ue=s(W,!0);n(W);var we=m(W,2),le=s(we);{var ke=se=>{var ie=Ya(),Me=s(ie);n(ie),B(()=>j(Me,`↻ ${z().resetIn??""}`)),b(se,ie)};P(le,se=>{z().resetIn&&se(ke)})}var ne=m(le,2),Te=s(ne);n(ne),n(we),n(Q),B((se,ie)=>{j(ue,Z()),V(ne,1,`font-mono text-sm ${se??""}`),j(Te,`${ie??""}%`)},[()=>p(z().minPercent),()=>Math.round(z().minPercent)]),b(K,Q)}),b(k,H)},R=k=>{var H=Ka();b(k,H)};P(E,k=>{x(w)?.groupQuotas?k(O):k(R,!1)})}b(A,L)};P(I,A=>{o().length>0?A(G):A(F,!1)})}n(N),n(M),n(S),n(_),B(()=>{V(a,1,`text-sm font-medium text-white font-mono truncate ${l.emailsHidden?"blur-email":""}`),j(v,l.modalEmail)}),b(u,_)};P(h,u=>{l.modalOpen&&u(f)})}b(e,d),ve()}Se(["click"]);var $a=T('<div class="fixed inset-0 z-50"><div class="modal-backdrop absolute inset-0"></div> <div class="relative flex items-center justify-center min-h-screen p-4"><div class="modal-enter glass-card rounded-xl shadow-2xl w-full max-w-md overflow-hidden"><div class="flex items-center justify-between px-5 py-4 border-b border-white/5"><h3 class="text-sm font-medium text-white">Settings</h3> <button class="p-2 rounded-lg hover:bg-surface-3 text-text-muted hover:text-text-primary transition-colors" title="Close"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-5 space-y-6"><div class="flex items-center justify-between"><div><p class="text-sm text-text-primary font-medium">Auto Refresh</p> <p class="text-xs text-text-muted mt-0.5">Automatically refresh quota data</p></div> <button><span></span></button></div> <div><label class="block text-sm text-text-primary font-medium mb-2">Refresh Interval</label> <select class="w-full bg-surface-3 border border-white/10 rounded-lg px-3 py-2 text-sm text-text-primary focus:outline-none focus:border-accent-primary disabled:opacity-50"><option>1 minute</option><option>3 minutes</option><option>5 minutes</option><option>10 minutes</option></select></div> <div class="bg-surface-2/50 rounded-lg p-3"><p class="text-xs text-text-muted"><span class="text-accent-primary">●</span> Settings are saved to localStorage</p></div></div> <div class="px-5 py-4 border-t border-white/5 flex justify-end gap-3"><button class="px-4 py-2 text-sm text-text-secondary hover:text-text-primary transition-colors">Cancel</button> <button class="px-4 py-2 bg-accent-primary hover:bg-accent-primary/90 rounded-lg text-sm font-medium text-white transition-colors">Save</button></div></div></div></div>');function er(e,t){de(t,!0);let r=Ye(300),i=Ye(!0);Vt(()=>{l.settingsOpen&&(Ie(r,l.settings.refreshInterval,!0),Ie(i,l.settings.autoRefresh,!0))});function c(f){f.target===f.currentTarget&&fe()}function o(f){f.key==="Escape"&&fe()}function p(){fa({refreshInterval:x(r),autoRefresh:x(i)}),fe()}var g=ae();ut("keydown",vt,o);var d=q(g);{var h=f=>{var u=$a();u.__click=c;var _=m(s(u),2),S=s(_);S.__click=k=>k.stopPropagation();var M=s(S),C=m(s(M),2);C.__click=function(...k){fe?.apply(this,k)},n(M);var a=m(M,2),v=s(a),y=m(s(v),2);y.__click=()=>Ie(i,!x(i));var N=s(y);n(y),n(v);var I=m(v,2),G=m(s(I),2),F=s(G);F.value=F.__value=60;var A=m(F);A.value=A.__value=180;var w=m(A);w.value=w.__value=300;var L=m(w);L.value=L.__value=600,n(G),n(I),dt(2),n(a);var E=m(a,2),O=s(E);O.__click=function(...k){fe?.apply(this,k)};var R=m(O,2);R.__click=p,n(E),n(S),n(_),n(u),B(()=>{V(y,1,`relative w-11 h-6 rounded-full transition-colors ${x(i)?"bg-accent-primary":"bg-surface-4"}`),V(N,1,`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${x(i)?"translate-x-5":""}`),G.disabled=!x(i)}),ea(G,()=>x(r),k=>Ie(r,k)),b(f,u)};P(d,f=>{l.settingsOpen&&f(h)})}b(e,g),ve()}Se(["click"]);var tr=T('<div class="flex items-center justify-center py-20"><div class="flex items-center gap-3"><svg class="w-6 h-6 text-accent-primary spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span class="text-text-secondary">Loading quota data...</span></div></div>'),ar=T('<div class="glass-card rounded-xl p-6 text-center"><p class="text-status-critical"> </p></div>'),rr=T('<div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6"><!> <!> <!> <!></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-4"></div>',1),nr=T('<div class="grid grid-cols-2 lg:grid-cols-3 gap-4 mb-6"><!> <!> <!></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-4"></div>',1),sr=T("<!> <!> <!>",1),ir=T('<!> <main class="max-w-7xl mx-auto px-4 py-6"><!></main> <!> <!> <!>',1);function fr(e,t){de(t,!1),gt(()=>(la(),qe(),pa())),Be();var r=ir(),i=q(r);ya(i,{});var c=m(i,2),o=s(c);{var p=u=>{var _=tr();b(u,_)},g=u=>{var _=ae(),S=q(_);{var M=a=>{var v=ar(),y=s(v),N=s(y,!0);n(y),n(v),B(()=>j(N,l.error)),b(a,v)},C=a=>{var v=sr(),y=q(v);{var N=w=>{var L=ae(),E=q(L);{var O=k=>{var H=rr(),D=q(H),K=s(D);at(K,{label:"Accounts",get value(){return l.data.totalAntigravity},get subLabel(){return l.data.lastUpdated}});var U=m(K,2);{let Q=J(()=>Xe().avg),W=J(()=>Xe().resetIn);pe(U,{label:"Claude",get percent(){return x(Q)},get resetIn(){return x(W)}})}var X=m(U,2);{let Q=J(()=>Ze().avg),W=J(()=>Ze().resetIn);pe(X,{label:"Gemini Pro",get percent(){return x(Q)},get resetIn(){return x(W)}})}var Z=m(X,2);{let Q=J(()=>$e().avg),W=J(()=>$e().resetIn);pe(Z,{label:"Gemini Flash",get percent(){return x(Q)},get resetIn(){return x(W)}})}n(D);var z=m(D,2);be(z,5,()=>l.data.accounts,he,(Q,W)=>{rt(Q,{get account(){return x(W)},type:"antigravity",get lastUpdated(){return l.data.lastUpdated}})}),n(z),b(k,H)},R=k=>{He(k,{title:"No Accounts Found",message:"No auth files found in <code class='bg-surface-3 px-2 py-1 rounded font-mono text-xs'>~/.cli-proxy-api/</code>"})};P(E,k=>{l.data&&l.data.totalAntigravity>0?k(O):k(R,!1)})}b(w,L)};P(y,w=>{l.activeTab==="antigravity"&&w(N)})}var I=m(y,2);{var G=w=>{var L=ae(),E=q(L);{var O=k=>{var H=nr(),D=q(H),K=s(D);at(K,{label:"Accounts",get value(){return l.data.totalCodex},get subLabel(){return l.data.lastUpdated}});var U=m(K,2);{let z=J(()=>et().avg),Q=J(()=>et().resetIn);pe(U,{label:"Session (5h)",get percent(){return x(z)},get resetIn(){return x(Q)}})}var X=m(U,2);{let z=J(()=>tt().avg),Q=J(()=>tt().resetIn);pe(X,{label:"Weekly",get percent(){return x(z)},get resetIn(){return x(Q)}})}n(D);var Z=m(D,2);be(Z,5,()=>l.data.codexAccounts,he,(z,Q)=>{rt(z,{get account(){return x(Q)},type:"codex"})}),n(Z),b(k,H)},R=k=>{He(k,{icon:"/codex.svg",title:"No Codex Accounts Found",message:"No auth files found at <code class='bg-surface-3 px-2 py-1 rounded font-mono text-xs'>~/.cli-proxy-api/codex-*.json</code>",hint:"Add Codex accounts via CLIProxyAPI"})};P(E,k=>{l.data&&l.data.totalCodex>0?k(O):k(R,!1)})}b(w,L)};P(I,w=>{l.activeTab==="codex"&&w(G)})}var F=m(I,2);{var A=w=>{He(w,{icon:"/gemini-cli.svg",title:"Gemini CLI Quota",message:"Gemini CLI quota monitoring coming soon.",hint:"Auth files will be loaded from <code class='bg-surface-3 px-2 py-1 rounded font-mono text-xs'>~/.gemini/</code>"})};P(F,w=>{l.activeTab==="gemini"&&w(A)})}b(a,v)};P(S,a=>{l.error?a(M):a(C,!1)},!0)}b(u,_)};P(o,u=>{l.loading&&!l.data?u(p):u(g,!1)})}n(c);var d=m(c,2);ka(d);var h=m(d,2);Za(h,{});var f=m(h,2);er(f,{}),b(e,r),ve()}export{fr as component};
